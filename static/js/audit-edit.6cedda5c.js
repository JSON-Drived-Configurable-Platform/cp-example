(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["audit-edit"],{"349c":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-audit"},[e.loading?a("div",{staticClass:"page-audit-loading"},[a("Spin",{staticClass:"page-audit-loading-spin",attrs:{size:"large"}})],1):[e._l(e.pageConfig.tableList,(function(t){return a("div",{key:t.title,staticClass:"page-audit-section"},[a("h3",{staticClass:"page-audit-header"},[e._v("\n        "+e._s(t.title)+"\n      ")]),a("div",{staticClass:"page-audit-tool-bar"},[e.downLoadUrl&&t.needShowDownLoadButton?a("a",{attrs:{href:e.downLoadUrl}},[e._v("下载全部")]):e._e()]),"table"===t.type?a("Table",{class:[t.changeFormStyle?"page-audit-table page-audit-form":"page-audit-table"],attrs:{columns:t.table.columns,data:t.table.data,"show-header":t.showTableHeader},scopedSlots:e._u([e._l(t.table.columns,(function(t){return{key:t.slot,fn:function(o){var l=o.row,i=o.index;return[t.formFields?a("Form",{key:t.slot,ref:t.slot+l.key,refInFor:!0,attrs:{model:l}},e._l(t.formFields,(function(o,n){return a("FieldGenerator",{key:n,attrs:{field:o,"params-container":e.paramsContainer},on:{"on-field-change":function(a){return e.handleFieldChange(a,l,t.slot+l.key)},"on-button-event":function(t){return e.handleButtonEvent(t,l,i)},"on-list-item-click":e.handleListItemClick}})})),1):a("div",{key:t.key},[e._v(e._s(l.value))])]}}}))],null,!0)}):e._e()],1)})),e.pageConfig.showButton?a("div",{staticClass:"page-audit-footer-actions"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSave(e.pageConfig.formVaildAction)}}},[e._v("提交保存")])],1):e._e()],a("Modal",{attrs:{width:800},model:{value:e.imgPreviewModalOpen,callback:function(t){e.imgPreviewModalOpen=t},expression:"imgPreviewModalOpen"}},[a("img",{staticClass:"page-audit-modal-img",attrs:{src:e.imgPreviewUrl,alt:""}})]),a("Modal",{attrs:{title:e.asureDialogConfig.title},model:{value:e.asureDialogShow,callback:function(t){e.asureDialogShow=t},expression:"asureDialogShow"}},[a("div",[e._v(e._s(e.asureDialogConfig.content))]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:e.cancel}},[e._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:e.confirm}},[e._v("确定")])],1)])],2)},l=[],i=(a("8e6e"),a("6762"),a("2fdb"),a("ac6a"),a("456d"),a("bd86")),n=a("2f62"),s=a("66df"),r={pageMark:"reCheck",showButton:!0,pageDataRequestInfo:{api:"/api/audit/edit/data",method:"get",apiParams:["all"]},submitRequestInfo:{api:"/api/audit/edit/submit",method:"get"},pageGoBackUrl:"",formVaildAction:"showDialog",tableList:[{title:"用户上传信息",type:"table",sectionKey:"baseInfo",needClearData:!0,changeFormStyle:!0,showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",key:"value",width:"auto"},{title:"操作",slot:"action",width:"auto",formFields:[{type:"Radio",model:"auditStatus",options:[{label:"通过",value:"1"},{label:"驳回",value:"2"}],rules:[{required:!0,message:"请选择审核结论"}]},{type:"Select",model:"reason",placeholder:"请选择原因",options:[{label:"此部分信息填写有误，请重新填写",value:"此部分信息填写有误，请重新填写"},{label:"此部分信息填写不完整，请重新填写",value:"此部分信息填写不完整，请重新填写"},{label:"此部分信息填写与所上传图片不符，请重新填写",value:"此部分信息填写与所上传图片不符，请重新填写"},{label:"其他原因，手动输入",value:"4"}],rules:[{required:!0,message:"请选择原因"}],showOn:{auditStatus:[{type:"enum",enum:["2"]},{required:!0}]}},{type:"Input",subtype:"textarea",model:"reasonDesc",placeholder:"请输入原因",rules:[{required:!0,message:"请输入原因"}],showOn:{reason:[{type:"enum",enum:["4"]},{required:!0}]}}]}]}},{title:"用户案件描述",type:"table",sectionKey:"caseDes",needClearData:!0,changeFormStyle:!1,showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",key:"value",width:"auto"},{title:"操作",slot:"action",width:"auto",formFields:[{type:"Radio",model:"auditStatus",options:[{label:"通过",value:"1"},{label:"驳回",value:"2"}],rules:[{required:!0,message:"请选择审核结论"}]},{type:"Select",model:"reason",placeholder:"请选择原因",options:[{label:"此部分信息填写有误，请重新填写",value:"此部分信息填写有误，请重新填写"},{label:"此部分信息填写不完整，请重新填写",value:"此部分信息填写不完整，请重新填写"},{label:"此部分信息填写与所上传图片不符，请重新填写",value:"此部分信息填写与所上传图片不符，请重新填写"},{label:"其他原因，手动输入",value:"4"}],rules:[{required:!0,message:"请选择原因"}],showOn:{auditStatus:[{type:"enum",enum:["2"]},{required:!0}]}},{type:"Input",subtype:"textarea",model:"reasonDesc",placeholder:"请输入原因",rules:[{required:!0,message:"请输入原因"}],showOn:{reason:[{type:"enum",enum:["4"]},{required:!0}]}}]}]}},{title:"用户更多信息",type:"table",sectionKey:"moreInfo",needClearData:!0,changeFormStyle:!1,showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",key:"value",width:"auto"}]}},{title:"用户图片信息",type:"table",sectionKey:"uploadMaterial",needClearData:!0,changeFormStyle:!0,showTableHeader:!0,table:{columns:[{title:"图片项",key:"label",width:150},{title:"图片列表",slot:"value1",width:"auto",formFields:[{type:"List",model:"value",cardWidth:"120px",cardHeight:"90px"}]},{title:"操作",slot:"action",width:250,formFields:[{type:"Radio",model:"auditStatus",options:[{label:"通过",value:"1"},{label:"驳回",value:"2"}],rules:[{required:!0,message:"请选择审核结论"}]},{type:"Select",model:"reason",placeholder:"请选择原因",options:[{label:"此项图片上传较模糊，请重新拍摄后上传",value:"此项图片上传较模糊，请重新拍摄后上传"},{label:"此项图片上传不完整，请重新拍摄后上传",value:"此项图片上传不完整，请重新拍摄后上传"},{label:"其他原因，手动输入",value:"3"}],rules:[{required:!0,message:"请选择原因"}],showOn:{auditStatus:[{type:"enum",enum:["2"]},{required:!0}]}},{type:"Input",subtype:"textarea",model:"reasonDesc",placeholder:"请输入原因",rules:[{required:!0,message:"请输入原因"}],showOn:{reason:[{type:"enum",enum:["3"]},{required:!0}]}}]}]}},{title:"案件审核结论",type:"table",sectionKey:"CaseReviewConclusion",changeFormStyle:!1,showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:"auto"},{title:"值",key:"value",width:"auto"},{title:"操作",slot:"action",width:"auto",formFields:[{type:"Radio",model:"auditStatus",options:[{label:"通过",value:"1",disabled:!1},{label:"驳回",value:"2",disabled:!0},{label:"不通过",value:"3",disabled:!0}],rules:[{required:!0,message:"请选择审核结论"}],showOn:{isPass:{type:"enum",enum:[!0]}}},{type:"Radio",model:"auditStatus",options:[{label:"通过",value:"1",disabled:!0},{label:"驳回",value:"2",disabled:!1},{label:"不通过",value:"3",disabled:!1}],rules:[{required:!0,message:"请选择审核结论"}],showOn:{isPass:{type:"enum",enum:[!1]}}}]}],data:[{key:"conclusion",label:"选择案件审核结论",value:"选择「通过」后转到下个审核流程，选择「不通过」后转到终审员，选择「驳回」后转到用户侧补交材料",reasonDesc:""}]}},{type:"table",changeFormStyle:!1,showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:100},{title:"操作",slot:"action",width:"auto",formFields:[{type:"Select",label:"",model:"companyId",options:"/api/audit/edit/company-list",rules:[{required:!0,type:"number",message:"请选择线下调查公司"}]}]}],data:[{key:"companyId",label:"选择线下调查公司",companyId:""}]}},{type:"table",changeFormStyle:!1,showTableHeader:!0,table:{columns:[{title:"审核项",key:"label",width:100},{title:"审核结论",slot:"action",width:"auto",formFields:[{type:"Input",subtype:"textarea",model:"checkConsolusion",placeholder:"请输入最终审核结论",rules:[{required:!0,message:"请输入最终审核结论"},{type:"string",min:20,max:500,message:"字数要求在20-500字之间",trigger:"blur"}]}]}],data:[{key:"checkConsolusion",label:"填写审核结论",checkConsolusion:""}]}}],dialogs:{title:"提交",content:"提交后，案件将转入下一流程"}},u={baseInfo:{aaname:"成员姓名",abidcard:"身份证号",diagnoseTime:"确诊时间",diseaseName:"确诊疾病",diagnoseHospital:"确诊医院",address:"常住地址",phone:"联系电话",backupPhone:"备用电话",bankNo:"收款卡号",bankUsername:"卡主姓名"},caseDes:{caseDes:"用户案件描述"},moreInfo:{joinTime:"加入时间",applyTime:"申请时间",totalDays:"累计加入",mutualMoney:"匹配互助金额",isSerious:"是否为轻疾"},uploadMaterial:{bankcard:"银行卡正反面",idCardImgs:"身份证正反面",inpatient:"住院和疾病相关材料",diseaseImgs:"诊断证明",application:"出院小结"},firstComment:{checkConsolusion:"初审建议"},secondComment:{checkConsolusion:"复审建议"},offlineComment:{undeilineProcess:"调查过程",undeilineSurvey:"调查概况"},offlineCommentLink:{underlineDocUrl:"调查材料"},checkConsolusion:{checkConsolusion:"材料终审建议"}},d=["conclusion","checkConsolusion","companyId"],c={pageConfig:r,keyToLabelMap:u,excludePassKeys:d},p={pageMark:"total",showButton:!1,pageDataRequestInfo:{api:"/api/audit/total/data",method:"get",apiParams:["all"]},pageGoBackUrl:"",tableList:[{title:"用户上传信息",type:"table",sectionKey:"baseInfo",needClearData:!0,needShowDownLoadButton:!1,showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",key:"value",width:"auto"}]}},{title:"用户案件描述",type:"table",needShowDownLoadButton:!1,needClearData:!0,sectionKey:"caseDes",showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",key:"value",width:"auto"}]}},{title:"用户更多信息",type:"table",needShowDownLoadButton:!1,needClearData:!0,sectionKey:"moreInfo",showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",key:"value",width:"auto"}]}},{title:"用户图片信息",type:"table",needShowDownLoadButton:!0,needClearData:!0,sectionKey:"uploadMaterial",showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"图片列表",slot:"value",width:"auto",formFields:[{type:"List",model:"value",cardWidth:"120px",cardHeight:"90px"}]}]}},{title:"材料初审建议",type:"table",needShowDownLoadButton:!1,needClearData:!0,sectionKey:"firstComment",showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",key:"value",width:"auto"}]}},{title:"材料复审建议",type:"table",needShowDownLoadButton:!1,needClearData:!0,sectionKey:"secondComment",showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",key:"value",width:"auto"}]}},{title:"线下调查建议",type:"table",needShowDownLoadButton:!1,needClearData:!0,sectionKey:"offlineComment",showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",width:"auto",key:"value"}]}},{title:"线下调查链接",type:"table",needShowDownLoadButton:!1,needClearData:!0,sectionKey:"offlineCommentLink",showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",width:"auto",slot:"value",formFields:[{type:"Button",model:"value",textModel:"value",subtype:"text",action:{type:"url"}}]}]}},{title:"材料终审建议",type:"table",needShowDownLoadButton:!1,needClearData:!0,sectionKey:"checkConsolusion",showTableHeader:!1,table:{columns:[{title:"项",key:"label",width:150},{title:"值",key:"value",width:"auto"}]}}]},h={baseInfo:{aaname:"成员姓名",abidcard:"身份证号",diagnoseTime:"确诊时间",diseaseName:"确诊疾病",diagnoseHospital:"确诊医院",address:"常住地址",phone:"联系电话",backupPhone:"备用电话",bankNo:"收款卡号",bankUsername:"卡主姓名"},caseDes:{caseDes:"用户案件描述"},moreInfo:{joinTime:"加入时间",applyTime:"申请时间",totalDays:"累计加入",mutualMoney:"匹配互助金额",isSerious:"是否为轻疾"},uploadMaterial:{bankcard:"银行卡正反面",idCardImgs:"身份证正反面",inpatient:"住院和疾病相关材料",diseaseImgs:"诊断证明",application:"出院小结"},firstComment:{checkConsolusion:"初审建议"},secondComment:{checkConsolusion:"复审建议"},offlineComment:{undeilineProcess:"调查过程",undeilineSurvey:"调查概况"},offlineCommentLink:{underlineDocUrl:"调查材料"},checkConsolusion:{checkConsolusion:"材料终审建议"}},m={pageConfig:p,keyToLabelMap:h},b={"/audit/edit":c,"/audit/total":m};function g(e,t){var a=Object.keys(e).map((function(a){var o={};return t[a]&&(o={key:a,label:t[a],value:e[a]}),o})).filter((function(e){return e}));return a}function f(e,t,a){var o=e.sectionKey,l=e.table,i=a[o],n=t.info&&t.info[o],s=[];return l.data&&l.data&&(s=l.data),i&&n&&(s=g(n,i)),s}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={data:function(){return{loading:!0,formModel:{},imgPreviewModalOpen:!1,imgPreviewUrl:"",asureDialogShow:!1,pageData:{isCheck:!0},downLoadUrl:""}},computed:w(w({},Object(n["b"])({pagePath:function(e){return e.page.pagePath}})),{},{pageConfig:function(){var e=this;if(b[this.pagePath]){var t=b[this.pagePath].pageConfig,a=t.tableList.map((function(t){var a=b[e.pagePath].keyToLabelMap;return t.table.data=f(t,e.pageData,a),t}));return t.tableList=a,t}return{request:{},dialogs:{},needDealUploadData:!1,submitRequestInfo:{}}},pageDataRequestInfo:function(){return this.pageConfig&&this.pageConfig.pageDataRequestInfo},submitRequestInfo:function(){return this.pageConfig.submitRequestInfo&&this.pageConfig.submitRequestInfo},asureDialogConfig:function(){return this.pageConfig.dialogs||{}},needDealUploadData:function(){return this.pageConfig.needDealUploadData||!1},isPass:function(){var e=this,t=b[this.pagePath].excludePassKeys||[];return Object.keys(this.formModel).filter((function(e){return!t.includes(e)})).every((function(t){return"1"===e.formModel[t].auditStatus}))},paramsContainer:function(){return{isPass:this.isPass}}}),watch:{pagePath:function(){this.getPageDetail()}},mounted:function(){this.getPageDetail()},methods:{getPageDetail:function(){var e=this;this.loading=!0,this.resetPageData();var t=this.pageDataRequestInfo,a=t.api,o=t.method;s["a"].request({method:o,url:a,params:{applyNo:this.$route.query.applyNo||0}}).then((function(t){t&&t.data&&(e.pageData=t.data,e.loading=!1)})).catch((function(t){e.loading=!1}))},handleFieldChange:function(e,t,a){var o=e.model,l=e.value,i=t.key;console.log(i,o,l,t,a),this.$refs[a][0].validate(),this.formModel[i]||this.$set(this.formModel,i,{}),this.$set(this.formModel[i],o,l)},handleSave:function(e){var t=this,a=0,o=Object.keys(this.$refs);o.forEach((function(e){t.$refs[e][0]&&t.$refs[e][0].validate().then((function(e){e&&a++,console.log("validCount",a,o.length),a===o.length&&(t.asureDialogShow=!0)})).catch((function(e){console.log(e)}))}))},handleListItemClick:function(e){var t=e.url;this.imgPreviewModalOpen=!0,this.imgPreviewUrl=t},cancel:function(){this.asureDialogShow=!1},confirm:function(){var e=this,t=this.pageConfig.submitRequestInfo,a=t.api,o=t.method,l=w(w({},this.formModel),{},{applyNo:this.$route.query.applyNo||0});s["a"].request({method:o,url:a,params:l}).then((function(t){0===+t.errno?e.$Message.success({background:!0,content:"提交成功"}):e.$Message.error({background:!0,content:"系统异常"})})),this.asureDialogShow=!1},resetPageData:function(){this.pageConfig.tableList=this.pageConfig.tableList.map((function(e){return e.needClearData&&(e.table.data=[]),e}))}}},k=v,C=(a("a0ee"),a("2877")),D=Object(C["a"])(k,o,l,!1,null,null,null),S=D.exports;t["default"]=S},7050:function(e,t,a){},a0ee:function(e,t,a){"use strict";var o=a("7050"),l=a.n(o);l.a}}]);
//# sourceMappingURL=audit-edit.6cedda5c.js.map